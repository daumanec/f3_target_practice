//************************************************************************//
//	LCD HD44780
//	Alex_EXE 
//	http://alex-exe.ru/category/radio/stm32/stm32-lcd-hd44780-spl
//************************************************************************//
#include "stm32f30x.h" 
#include "stm32f30x_rcc.h"
#include "stm32f30x_gpio.h"

//************************************************************************//
//			Ã�Å¡Ã�Â¾Ã�Â½Ã‘â€žÃ�Â¸Ã�Â³Ã‘Æ’Ã‘â‚¬Ã�Â°Ã‘â€ Ã�Â¸Ã‘ï¿½ Ã�Â¿Ã�Â¾Ã‘â‚¬Ã‘â€šÃ�Â°
//	Ã�Â¸Ã‘ï¿½Ã�Â¿Ã�Â¾Ã�Â»Ã‘Å’Ã�Â·Ã‘Æ’Ã�ÂµÃ�Â¼Ã‘â€¹Ã�Â¹ Ã�Â¿Ã�Â¾Ã‘â‚¬Ã‘â€š
#define lcd44780_port					GPIOD
//	Ã�Â¸Ã‘ï¿½Ã�Â¿Ã�Â¾Ã�Â»Ã‘Å’Ã�Â·Ã‘Æ’Ã�ÂµÃ�Â¼Ã‘â€¹Ã�Âµ Ã�Â²Ã‘â€¹Ã�Â²Ã�Â¾Ã�Â´Ã‘â€¹
#define lcd44780_pin_RS				GPIO_Pin_0
#define lcd44780_pin_E				GPIO_Pin_1
#define lcd44780_pins_data		GPIO_Pin_4 | GPIO_Pin_5 | GPIO_Pin_6 | GPIO_Pin_7
//	Ã�Â²Ã�ÂºÃ�Â»Ã‘Å½Ã‘â€¡Ã�Â¸Ã‘â€šÃ‘Å’ Ã‘â€šÃ�Â°Ã�ÂºÃ‘â€šÃ�Â¸Ã‘â‚¬Ã�Â¾Ã�Â²Ã�Â°Ã�Â½Ã�Â¸Ã�Âµ Ã�Â¿Ã�Â¾Ã‘â‚¬Ã‘â€šÃ�Â°
#define lcd44780_RCC					RCC_AHBPeriph_GPIOD
//	Ã‘ï¿½Ã�Â¼Ã�ÂµÃ‘â€°Ã�ÂµÃ�Â½Ã�Â¸Ã�Âµ Ã�Â½Ã�Â°Ã‘â€¡Ã�Â°Ã�Â»Ã�Â° Ã�Â»Ã�Â¸Ã�Â½Ã�Â¸Ã�Â¸ Ã�Â´Ã�Â°Ã�Â½Ã�Â½Ã‘â€¹Ã‘â€¦
#define lcd44780_offset 			4

#define lcd44780_RS_1 GPIO_SetBits(lcd44780_port, lcd44780_pin_RS);
#define lcd44780_E_1  GPIO_SetBits(lcd44780_port, lcd44780_pin_E);
#define lcd44780_RS_0 GPIO_ResetBits(lcd44780_port, lcd44780_pin_RS);
#define lcd44780_E_0  GPIO_ResetBits(lcd44780_port, lcd44780_pin_E);
//************************************************************************//

//	Ã�Â·Ã�Â°Ã�Â´Ã�ÂµÃ‘â‚¬Ã�Â¶Ã�ÂºÃ�Â°
//	Input : p - Ã�Â²Ã�ÂµÃ�Â»Ã�Â¸Ã‘â€¡Ã�Â¸Ã�Â½Ã�Â° Ã�Â·Ã�Â°Ã�Â´Ã�ÂµÃ‘â‚¬Ã�Â¶Ã�ÂºÃ�Â¸
void lcd44780_delay(unsigned int p);

//	Ã�Å¾Ã‘â€¡Ã�Â¸Ã‘ï¿½Ã‘â€šÃ�ÂºÃ�Â° Ã�Â´Ã�Â¸Ã‘ï¿½Ã�Â¿Ã�Â»Ã�ÂµÃ‘ï¿½
void lcd44780_ClearLCD(void);

//	Ã�Â£Ã‘ï¿½Ã‘â€šÃ�Â°Ã�Â½Ã�Â¾Ã�Â²Ã�ÂºÃ�Â° Ã�ÂºÃ‘Æ’Ã‘â‚¬Ã‘ï¿½Ã�Â¾Ã‘â‚¬Ã�Â° Ã�Â´Ã�Â¸Ã‘ï¿½Ã�Â¿Ã�Â»Ã�ÂµÃ‘ï¿½
//	Input : x , y - Ã�ÂºÃ�Â¾Ã�Â¾Ã‘â‚¬Ã�Â´Ã�Â¸Ã�Â½Ã�Â°Ã‘â€šÃ‘â€¹ Ã�ÂºÃ‘Æ’Ã‘â‚¬Ã‘ï¿½Ã�Â¾Ã‘â‚¬Ã�Â°
void lcd44780_SetLCDPosition(char x, char y);

//	Ã�Å¾Ã‘â€šÃ�Â¿Ã‘â‚¬Ã�Â°Ã�Â²Ã�ÂºÃ�Â° Ã‘ï¿½Ã�Â¸Ã�Â¼Ã�Â²Ã�Â¾Ã�Â»Ã�Â°
//	Input : c - Ã‘ï¿½Ã�Â¸Ã�Â¼Ã�Â²Ã�Â¾Ã�Â»
void lcd44780_ShowChar(unsigned char c);

//	Ã�Å¾Ã‘â€šÃ�Â¿Ã‘â‚¬Ã�Â°Ã�Â²Ã�ÂºÃ�Â° Ã‘ï¿½Ã‘â€šÃ‘â‚¬Ã�Â¾Ã�ÂºÃ�Â¸
//	Input : *s - Ã‘ï¿½Ã‘ï¿½Ã‘â€¹Ã�Â»Ã�ÂºÃ�Â° Ã�Â½Ã�Â° Ã‘ï¿½Ã‘â€šÃ‘â‚¬Ã�Â¾Ã�ÂºÃ‘Æ’ (Ã�Â¼Ã�Â°Ã‘ï¿½Ã‘ï¿½Ã�Â¸Ã�Â² Ã‘ï¿½Ã�Â¸Ã�Â¼Ã�Â²Ã�Â¾Ã�Â»Ã�Â¾Ã�Â²)
void lcd44780_ShowStr(char *s);

//	Ã�Â¸Ã�Â½Ã�Â¸Ã‘â€ Ã�Â¸Ã�Â°Ã�Â»Ã�Â¸Ã�Â·Ã�Â°Ã‘â€ Ã�Â¸Ã‘ï¿½ Ã�Â²Ã‘â€¹Ã�Â²Ã�Â¾Ã�Â´Ã�Â¾Ã�Â² Ã�Â´Ã�Â¸Ã‘ï¿½Ã�Â¿Ã�Â»Ã�ÂµÃ‘ï¿½
void lcd44780_init_pins(void);

//	Ã�ËœÃ�Â½Ã�Â¸Ã‘â€ Ã�Â¸Ã�Â°Ã�Â»Ã�Â¸Ã�Â·Ã�Â°Ã‘â€ Ã�Â¸Ã‘ï¿½ Ã�Â´Ã�Â¸Ã‘ï¿½Ã�Â¿Ã�Â»Ã�ÂµÃ‘ï¿½
void lcd44780_init(void);

//	Ã�Å¸Ã�ÂµÃ‘â‚¬Ã�ÂµÃ�Â¹Ã‘â€šÃ�Â¸ Ã�Â½Ã�Â° Ã‘ï¿½Ã‘â€šÃ‘â‚¬Ã�Â¾Ã‘â€¡Ã�ÂºÃ‘Æ’
//	Input : LineNum - Ã�Â½Ã�Â¾Ã�Â¼Ã�ÂµÃ‘â‚¬ Ã‘ï¿½Ã‘â€šÃ‘â‚¬Ã�Â¾Ã�ÂºÃ�Â¸
void lcd44780_GoToLine(char LineNum);
